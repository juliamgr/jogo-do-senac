<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <div class="armario">
        
        <IMG  class="armario2" src="armario2.avif">
            <IMG  class="armario2" src="armario2.avif">
                <IMG  class="armario2" src="armario2.avif">
                    <IMG  class="armario2" src="armario2.avif">
                        <IMG  class="armario2" src="armario2.avif">
                            
                        
    </div>
    <div id="entrada"></div>

   
    
        
    </DIV>
    <title>Quadrado Móvel</title>
    <style>
        #entrada{
            display:block;
           
            height: 100%;
            width: 40%;
            background-color: BLUE;
            position: relative;
padding-top: 30%;
            margin-right: 20px;
           
        }
        body {
            cursor: url();
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-image: url('https://i.pinimg.com/564x/20/76/73/207673d5352a495fcfb62e1b4bb81e5c.jpg');
            background-color: #937d7d;
        }
    .armario2{
        display: block;
        float: left;
        
        height: 20%;
        width: 18%;
       margin-top:0%;
    }

        canvas {
            display: block;
            background-color: #2c3e50; /* Cor do fundo do canvas */
        }

        #square {
            position: absolute;
            width: 100px;
            height: 100px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #square img {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

<canvas id="Canva" width="100" height="100" style="background-color: red;"></canvas> <!-- Tamanho da tela -->

<canvas id="gameCanvas" width="80" height="60"></canvas>
<div id="square">
    <img id="square-gif" src="./dimiparado.png" width="70" alt="Personagem">
</div>

<script>
    const canvas = document.getElementById('Canva');
    const square = document.getElementById('square');
    const squareGif = document.getElementById('square-gif');
    const ctx = canvas.getContext('2d');

    let posX = canvas.width / 15- 100; // Posição inicial do personagem (centrado)
    let posY = canvas.height / 15 - 100; // Posição inicial do personagem (centrado)
    const step = 15; // Quantidade de movimento em pixels
    const width = square.offsetWidth;  // Largura do quadrado
    const height = square.offsetHeight; // Altura do quadrado
    let gifAtivo = false; // Controle para saber se o gif está animado ou não

    // Variável de controle das teclas pressionadas
    let movingKeys = {
        w: false,
        a: false,
        s: false,
        d: false
    };

    // Definindo limites personalizados para a área de movimento
    const maxX = canvas.width * 9;  // Limite direito aumentado (2x a largura do canvas)
    const maxY = canvas.height * 5; // Limite inferior aumentado (2x a altura do canvas)

    // Função para atualizar a posição do personagem e o gif
    function moverPersonagem() {
        // Verifica se as teclas estão pressionadas e move o personagem
        if (movingKeys.w) {
            posY = Math.max(posY - step, -210);  // Limite superior
            gifAtivo = true;
            squareGif.src = './dimi de costa (1).gif'; 
        }
        if (movingKeys.s) {
            posY = Math.min(posY + step,  maxY - height,200 );  // Limite inferior aumentado
            gifAtivo = true;
            squareGif.src = './didmitrinho (1).gif'; 
        }
        if (movingKeys.a) {
            posX = Math.max(posX - step, -620);  // Limite esquerdo
            squareGif.src = './dimi esq.gif'; 
            square.style.transform = `translate(${posX}px, ${posY}px) rotateY(180deg)`; 
            gifAtivo = true;
        }
        if (movingKeys.d) {
            posX = Math.min(posX + step, maxX - width, 500);  // Limite direito aumentado
            squareGif.src = './dimi dir.gif'; 
            square.style.transform = `translate(${posX}px, ${posY}px) rotateY(0deg)`; 
            gifAtivo = true;
        }

        // Atualiza a posição do quadrado na tela
        square.style.transform = `translate(${posX}px, ${posY}px)`; 
    }

    // Detecta quando uma tecla é pressionada
    window.addEventListener('keydown', (e) => {
        if (['w', 'a', 's', 'd'].includes(e.key)) {
            movingKeys[e.key] = true;
            moverPersonagem();
        }
    });

    // Detecta quando uma tecla é liberada
    window.addEventListener('keyup', (e) => {
        if (['w', 'a', 's', 'd'].includes(e.key)) {
            movingKeys[e.key] = false;
        }
        
        // Se nenhuma tecla de movimento for pressionada, o gif será parado
        if (!Object.values(movingKeys).includes(true)) {
            gifAtivo = false;
            squareGif.src = './dimiparado.png'; // Coloca a imagem estática quando o gif não está em movimento
        }
    });

    // Função para desenhar o canvas (opcional, você pode adicionar outras coisas no canvas)
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); // Limpa o canvas
        // Desenha o personagem no canvas (apenas exemplo, não será necessário com o div "square" controlando a posição)
        // ctx.fillRect(posX, posY, 70, 70); // Desenha o quadrado (personagem)
        requestAnimationFrame(draw); // Redesenha o canvas
    }

    // Inicia o desenho contínuo (opcional, se quiser adicionar outras coisas no canvas)
    draw();



    function drawSquare() {
    ctx.clearRect(  canvas.width, canvas.height); // Limpar o canvas
    ctx.drawImage(img, square.x, square.y, square.width, square.height); // Desenhar a imagem no quadrado
}

// Checar colisão com o mouse
function checkCollision(mouseX, mouseY) {
    if (mouseX >= square.x && mouseX <= square.x + square.width &&
        mouseY >= square.y && mouseY <= square.y + square.height) {
        return true; // Colidiu com o quadrado
    }
    return false;
}

// Função para iniciar a interação (pressionando a tecla "F")
function startInteraction() {
    isInteracting = !isInteracting; // Alterna o estado de interação
    if (isInteracting) {
        alert("Interação iniciada! Clique no quadrado.");
    } else {
        alert("Interação encerrada.");
    }
}

// Evento de pressionamento de tecla (para iniciar interação com a tecla F)
document.addEventListener('keydown', function(event) {
    if (event.key === 'f' || event.key === 'F') {
        startInteraction(); // Inicia ou interrompe a interação
    }
});

// Evento de clique do mouse para verificar colisão com o quadrado
canvas.addEventListener('click', function(event) {
    const mouseX = event.offsetX;
    const mouseY = event.offsetY;

    if (checkCollision(mouseX, mouseY) && isInteracting) {
        alert("Você clicou no quadrado e iniciou uma interação!");
    }
});

// Atualizar o canvas
function updateCanvas() {
    drawSquare(); // Desenha o quadrado (com a imagem)
    requestAnimationFrame(updateCanvas); // Faz o loop de animação
}

img.onload = function() {
    updateCanvas(); // Inicia o loop de animação quando a imagem carregar
}

</script>

</body>
</html>
