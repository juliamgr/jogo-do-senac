<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quadrado Móvel</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #937d7d;
        }

        canvas {
            display: block;
            background-color: #2c3e50; /* Cor do fundo do canvas */
        }

        #square {
            position: absolute;
            width: 70px;
            height: 70px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #square img {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

<canvas id="Canva" width="800" height="600"></canvas>
<div id="square">
    <img id="square-gif" src="./dimiparado.png" width="70" alt="Personagem">
</div>

<script>
    const canvas = document.getElementById('Canva');
    const square = document.getElementById('square');
    const squareGif = document.getElementById('square-gif');
    const ctx = canvas.getContext('2d');

    let posX = canvas.width / 2 - 35; // Centralizado na largura
    let posY = canvas.height / 2 - 35; // Centralizado na altura
    const step = 10; // Quantidade de movimento em pixels
    const width = square.offsetWidth;  // Largura do quadrado
    const height = square.offsetHeight; // Altura do quadrado
    let gifAtivo = false; // Controle para saber se o gif está animado ou não

    // Variável de controle das teclas pressionadas
    let movingKeys = {
        w: false,
        a: false,
        s: false,
        d: false
    };

    // Função para atualizar a posição do personagem e o gif
    function moverPersonagem() {
        // Verifica se as teclas estão pressionadas e move o personagem
        if (movingKeys.w) {
            posY = Math.max(posY - step, 0); // Limita o movimento para cima
            gifAtivo = true; // Ativa o gif animado
            squareGif.src = './didmitrinho (1).gif'; // Gif animado
        }
        if (movingKeys.s) {
            posY = Math.min(posY + step, canvas.height - height); // Limita o movimento para baixo
            gifAtivo = true;
            squareGif.src = './didmitrinho (1).gif'; // Gif animado
        }
        if (movingKeys.a) {
            posX = Math.max(posX - step, 0); // Limita o movimento para a esquerda
            squareGif.src = './dimi esq.gif'; // Gif animado para esquerda
            square.style.transform = `translate(${posX}px, ${posY}px) rotateY(180deg)`; // Rotaciona para esquerda
            gifAtivo = true;
        }
        if (movingKeys.d) {
            posX = Math.min(posX + step, canvas.width - width); // Limita o movimento para a direita
            squareGif.src = './dimi dir.gif'; // Gif animado para direita
            square.style.transform = `translate(${posX}px, ${posY}px) rotateY(0deg)`; // Rotaciona para direita
            gifAtivo = true;
        }

        // Atualiza a posição do quadrado no canvas
        square.style.transform = `translate(${posX}px, ${posY}px)`; // Atualiza a posição do quadrado com rotação
    }

    // Detecta quando uma tecla é pressionada
    window.addEventListener('keydown', (e) => {
        if (['w', 'a', 's', 'd'].includes(e.key)) {
            movingKeys[e.key] = true;
            moverPersonagem();
        }
    });

    // Detecta quando uma tecla é liberada
    window.addEventListener('keyup', (e) => {
        if (['w', 'a', 's', 'd'].includes(e.key)) {
            movingKeys[e.key] = false;
        }
        
        // Se nenhuma tecla de movimento for pressionada, o gif será parado
        if (!Object.values(movingKeys).includes(true)) {
            gifAtivo = false;
            squareGif.src = './dimiparado.png'; // Coloca a imagem estática quando o gif não está em movimento
        }
    });

    // Função para desenhar o canvas (opcional, você pode adicionar outras coisas no canvas)
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); // Limpa o canvas
        // Desenha o personagem no canvas (apenas exemplo, não será necessário com o div "square" controlando a posição)
        // ctx.fillRect(posX, posY, 70, 70); // Desenha o quadrado (personagem)
        requestAnimationFrame(draw); // Redesenha o canvas
    }

    // Inicia o desenho contínuo (opcional, se quiser adicionar outras coisas no canvas)
    draw();

</script>

</body>
</html>
